<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Team Login - BitRise</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#050505;
      --glass: rgba(255,255,255,0.05);
      --accent1: #00ff88;
      --accent2: #00d4ff;
      --danger: #ff4444;
      --muted: #888;
    }

    /* Page layout */
    html,body{height:100%;margin:0;background:var(--bg);font-family:'Poppins',sans-serif;color:#fff;overflow:hidden}
    .wrap{height:100%;display:flex;align-items:center;justify-content:center;padding:20px;position:relative}

    /* Particles canvas */
    #bgCanvas{position:fixed;inset:0;width:100%;height:100%;z-index:0;opacity:0.65;pointer-events:none}

    /* Container */
    .container{
      position:relative;
      z-index:3;
      width:360px;
      max-width:calc(100% - 40px);
      text-align:center;
      background:var(--glass);
      backdrop-filter:blur(10px);
      border-radius:18px;
      padding:32px;
      border:1px solid rgba(0,255,136,0.12);
      box-shadow:0 8px 40px rgba(0,212,255,0.06);
      transition:transform 400ms cubic-bezier(.2,.9,.3,1);
    }
    .container.enter{transform:scale(1.02)}

    h2{font-family:'Orbitron',sans-serif;color:var(--accent1);margin:0 0 12px;text-shadow:0 0 8px rgba(0,255,136,0.12);letter-spacing:1.8px}
    .greeting{font-size:13px;color:#bdeedd;margin-bottom:18px}

    /* Input + eye */
    .field{position:relative;margin-bottom:14px}
    input[type="password"], input[type="text"]{
      width:100%;padding:12px 44px 12px 14px;border-radius:10px;background:#0f0f0f;border:1px solid #242424;color:#fff;box-sizing:border-box;font-size:15px;text-align:center;transition:box-shadow 200ms, border-color 200ms
    }
    input:focus{outline:none;border-color:var(--accent2);box-shadow:0 0 10px rgba(0,212,255,0.14)}
    .eye-btn{
      position:absolute;right:10px;top:50%;transform:translateY(-50%);background:transparent;border:none;color:#bbb;cursor:pointer;padding:6px;border-radius:6px;font-size:14px
    }

    /* Buttons */
    .btn{
      display:inline-block;width:100%;padding:12px;border-radius:10px;border:none;font-family:'Orbitron',sans-serif;font-weight:700;cursor:pointer;font-size:15px;
      background:linear-gradient(45deg,var(--accent1),var(--accent2));color:#000;transition:transform 180ms,box-shadow 180ms;
    }
    .btn:active{transform:scale(0.99)}
    .btn[disabled]{opacity:0.6;cursor:not-allowed;transform:none}

    /* Small links and footer */
    .links{display:flex;justify-content:space-between;align-items:center;margin-top:12px;font-size:13px}
    .back-link{color:var(--muted);text-decoration:none}
    .back-link:hover{color:var(--accent2)}
    .footer{font-size:12px;color:#9aa;border-top:1px solid rgba(255,255,255,0.02);margin-top:16px;padding-top:12px;color:#9aa}

    /* Error message */
    #errorMsg{display:none;color:var(--danger);font-size:13px;margin-top:10px}

    /* Lockout style */
    .locked{border-color:rgba(255,68,68,0.2);box-shadow:0 0 18px rgba(255,68,68,0.06)}

    /* Animated neon border */
    .container::before{
      content:"";position:absolute;inset:-2px;border-radius:20px;padding:2px;
      background:linear-gradient(90deg, rgba(0,255,136,0.06), rgba(0,212,255,0.04));
      z-index:-1;filter:blur(12px);opacity:0.7;transition:opacity 0.3s;
    }
    .container:hover::before{opacity:1}

    /* Shake animation */
    @keyframes shake {
      0%{transform:translateX(0)}
      20%{transform:translateX(-8px)}
      40%{transform:translateX(8px)}
      60%{transform:translateX(-6px)}
      80%{transform:translateX(6px)}
      100%{transform:translateX(0)}
    }
    .shake{animation:shake 550ms}

    /* Loading overlay & fake terminal */
    .overlay{
      position:absolute;inset:0;background:linear-gradient(0deg,rgba(1,1,1,0.75),rgba(1,1,1,0.55));border-radius:18px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px;padding:20px;z-index:6;backdrop-filter: blur(4px);opacity:0;pointer-events:none;transition:opacity 220ms;
    }
    .overlay.show{opacity:1;pointer-events:auto}
    .spinner{width:48px;height:48px;border-radius:50%;border:4px solid rgba(255,255,255,0.08);border-top-color:var(--accent2);animation:spin 900ms linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    .terminal{
      width:100%;max-width:320px;background:#060606;border-radius:8px;padding:12px;text-align:left;color:#bfeef8;font-family:monospace;font-size:12px;box-shadow:0 6px 28px rgba(0,0,0,0.6)
    }
    .terminal .line{opacity:0.95;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .terminal .success{color:#9fffbf}
    .terminal .info{color:#bfeef8}
    .terminal .danger{color:#ff9a9a}

    /* Modal (Forgot code) */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:12}
    .modal{background:#0c0c0c;padding:18px;border-radius:10px;width:360px;max-width:92%;border:1px solid rgba(255,255,255,0.03)}
    .modal h3{margin:0 0 8px;font-family:'Orbitron',sans-serif;color:var(--accent2);font-size:16px}
    .modal p{margin:0 0 12px;color:#bdbdbd;font-size:13px}
    .modal .modal-actions{display:flex;justify-content:flex-end;gap:8px}

    /* small hint text */
    .hint{font-size:12px;color:#aab;margin-top:8px}

    /* Responsive */
    @media (max-width:420px){
      .container{padding:20px}
      .terminal{max-width:100%}
    }

  </style>
</head>
<body>
  <canvas id="bgCanvas" aria-hidden="true"></canvas>

  <div class="wrap">
    <div class="container" id="mainContainer">
      <h2>TEAM ACCESS</h2>
      <div class="greeting" id="greetingText">Welcome</div>

      <div class="field">
        <input id="passcode" type="password" placeholder="Enter Secret Code" aria-label="Secret Code">
        <button class="eye-btn" id="toggleEye" title="Show/Hide code" aria-pressed="false">Show</button>
      </div>

      <button class="btn" id="unlockBtn">UNLOCK SYSTEM</button>

      <div id="errorMsg" role="status" aria-live="polite">Access Denied. Wrong code.</div>

      <div class="links">
        <a href="dashboard.html" class="back-link">Just view the list →</a>
        <a href="#" id="forgotLink" class="back-link">Forgot code?</a>
      </div>

      <div class="footer">
        BitRise Internal Access System • 2025
        <div class="hint">This portal is restricted to authorized team members only.</div>
      </div>

      <!-- Overlay for loading / fake scan / terminal -->
      <div class="overlay" id="overlay">
        <div class="spinner" id="spinner" aria-hidden="true"></div>
        <div class="terminal" id="terminal" aria-hidden="true" style="display:none"></div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <h3>Need help accessing?</h3>
      <p>If you forgot the code, contact your team lead to regenerate access. For security, codes are not recoverable from the client. You can request a reset link or temporary code.</p>
      <div class="modal-actions">
        <button id="modalClose" class="btn" style="width:auto;padding:8px 12px;font-weight:600">Close</button>
      </div>
    </div>
  </div>

  <script>

    const initThreeJS = () => {
        const canvas = document.getElementById('bgCanvas');
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        const scene = new THREE.Scene();
        // Dark fog to hide the edges smoothly
        scene.fog = new THREE.FogExp2(0x000000, 0.0015);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        // Position camera low to look across the "sea"
        camera.position.set(0, 3, 10);

        // --- THE GEOMETRY (Digital Landscape) ---
        // A large plane with many segments for the wave effect
        const planeGeo = new THREE.PlaneGeometry(100, 100, 50, 50);
        const planeMat = new THREE.MeshBasicMaterial({ 
            color: 0x00ff88, // Neon Green
            wireframe: true,
            transparent: true,
            opacity: 0.15
        });
        const terrain = new THREE.Mesh(planeGeo, planeMat);
        terrain.rotation.x = -Math.PI / 2; // Lay it flat
        scene.add(terrain);

        // Variables for animation
        let time = 0;
        let mouseX = 0;
        let mouseY = 0;

        // Interaction: Track mouse
        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth / 2) * 0.001;
            mouseY = (e.clientY - window.innerHeight / 2) * 0.001;
        });

        // Handle Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- ANIMATION LOOP ---
        const animate = () => {
            requestAnimationFrame(animate);
            time += 0.003;

            // 1. Move terrain towards camera (infinite scrolling illusion)
            // We use a modulo operator to snap it back, creating a loop
            terrain.position.z = (time * 50) % 2; 

            // 2. Wave Effect (Maths magic)
            // We access the vertices of the plane and move them up/down
            const { array, count } = planeGeo.attributes.position;
            // Note: In PlaneGeometry, Z is actually the "up" direction relative to the face before rotation
            // But since we rotated x by -90deg, we modify the local Z (which looks like Y in world space)
            for (let i = 0; i < count; i++) {
                const x = array[i * 3];     // x position
                const y = array[i * 3 + 1]; // y position
                
                // Create a flowing wave using Sine and Cosine
                // We mix time, x, and y to make it look organic
                const z = Math.sin(x * 0.3 + time * 2) * 0.5 + Math.cos(y * 0.2 + time) * 0.5;
                
                // Update the vertex height
                array[i * 3 + 2] = z; 
            }
            planeGeo.attributes.position.needsUpdate = true;

            // 3. Camera Interaction (Parallax)
            camera.position.x += (mouseX * 5 - camera.position.x) * 0.05;
            camera.position.y += (3 + mouseY * 2 - camera.position.y) * 0.05;
            camera.lookAt(0, 0, 0);

            // 4. Subtle color shift based on time (Green to Cyan)
            const hue = (time * 0.1) % 1;
            // Keeping it strictly green/cyan for your theme
            // planeMat.color.setHSL(0.35 + Math.sin(time)*0.05, 1, 0.5);

            renderer.render(scene, camera);
        };

        animate();
    };

    (function(){
        
        // --- SECURITY: SHA-256 HASH ---
        // The password is "BitRise2025"
        // But we ONLY store the hash. 
        // Hash: 3de2c229f6e67706f418ce0850b1702bad11539f46a26d9e6d632f5ef59dd736
        const TARGET_HASH = "3de2c229f6e67706f418ce0850b1702bad11539f46a26d9e6d632f5ef59dd736";
        
        async function hashString(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        // --- DOM ELEMENTS ---
        const passInput = document.getElementById('passcode');
        const unlockBtn = document.getElementById('unlockBtn');
        const errorMsg = document.getElementById('errorMsg');
        const overlay = document.getElementById('overlay');
        const terminal = document.getElementById('terminal');
        const spinner = document.getElementById('spinner');
        const container = document.getElementById('mainContainer');

        // Init Background
        initThreeJS();

        // Greeting
        const h = new Date().getHours();
        document.getElementById('greetingText').textContent = 
            h < 5 ? 'Night Shift Protocol Active' : 
            h < 12 ? 'Good Morning, Operator' : 
            h < 18 ? 'Good Afternoon, Operator' : 'Good Evening, Operator';

        container.classList.add('enter');

        // --- TYPEWRITER EFFECT HELPER ---
        const typeText = async (text, colorClass = 'info') => {
            const line = document.createElement('div');
            line.className = 'line ' + colorClass;
            terminal.appendChild(line);
            
            // Type char by char
            for(let char of text){
                line.textContent += char;
                // Random typing speed for realism (10ms to 50ms)
                await new Promise(r => setTimeout(r, Math.random() * 40 + 10));
                terminal.scrollTop = terminal.scrollHeight;
            }
        };

        // --- MAIN LOGIN SEQUENCE ---
        async function handleLogin(){
            const inputVal = passInput.value.trim();
            if(!inputVal) return;

            // Lock UI
            unlockBtn.disabled = true;
            passInput.disabled = true;
            errorMsg.style.display = 'none';

            // Show Overlay
            overlay.classList.add('show');
            overlay.setAttribute('aria-hidden', 'false');
            spinner.style.display = 'block';
            terminal.style.display = 'none';

            // Fake "Connecting" delay
            await new Promise(r => setTimeout(r, 800));

            spinner.style.display = 'none';
            terminal.style.display = 'block';
            terminal.innerHTML = ''; // clear previous

            // Cinematic Logs
            await typeText('> INITIALIZING SECURE HANDSHAKE...', 'info');
            await new Promise(r => setTimeout(r, 300));
            await typeText('> HASHING INPUT CREDENTIALS...', 'info');
            
            // Verify Hash
            const userHash = await hashString(inputVal);
            await new Promise(r => setTimeout(r, 600)); // Suspense

            if(userHash === TARGET_HASH){
                await typeText('> MATCH FOUND. DECRYPTING...', 'success');
                await new Promise(r => setTimeout(r, 400));
                await typeText('> ACCESS GRANTED.', 'success');
                await typeText('> Redirecting to Mainframe...', 'info');
                
                // Success - Redirect
                localStorage.setItem('isTeamMember', 'true');
                setTimeout(() => {
                    window.location.href = 'dashboard.html'; 
                }, 1000);
            } else {
                await typeText('> HASH MISMATCH.', 'danger');
                await typeText('> ACCESS DENIED.', 'danger');
                
                // Shake & Reset
                passInput.classList.add('shake');
                setTimeout(()=> passInput.classList.remove('shake'), 500);
                
                await new Promise(r => setTimeout(r, 1500));
                
                // Hide Overlay
                overlay.classList.remove('show');
                overlay.setAttribute('aria-hidden', 'true');
                unlockBtn.disabled = false;
                passInput.disabled = false;
                passInput.value = '';
                passInput.focus();
                errorMsg.style.display = 'block';
                errorMsg.textContent = 'Identity Verification Failed.';
            }
        }

        // Listeners
        unlockBtn.addEventListener('click', handleLogin);
        passInput.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') handleLogin();
        });

        // Eye Toggle
        document.getElementById('toggleEye').addEventListener('click', (e) => {
            const isPass = passInput.type === 'password';
            passInput.type = isPass ? 'text' : 'password';
            e.target.textContent = isPass ? 'Hide' : 'Show';
        });

        // Clean up focus
        passInput.focus();

    })();
</script>
</body>
</html>
